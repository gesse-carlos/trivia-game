(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{34:function(e,t,n){e.exports=n.p+"static/media/trivia.466d153e.png"},40:function(e,t,n){e.exports=n(57)},49:function(e,t,n){},53:function(e,t){},54:function(e,t,n){},55:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(21),i=n.n(c),s=n(18),o=n(15),u=n(19),l=n(32),d=n(33),m=n(13),b={userToken:"",isFetching:!1,questions:[]};var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_TOKEN":return Object(m.a)({},e,{isFetching:!0});case"GET_TOKEN":return Object(m.a)({},e,{userToken:t.userToken,isFetching:!1});case"SUBMIT_QUESTIONS":case"ADD_QUESTIONS_ON_STORE":return Object(m.a)({},e,{questions:t.payload});case"GET_QUESTIONS":return Object(m.a)({},e,{questions:t.questions});case"GET_QUESTIONS_ERROR":default:return Object(m.a)({},e)}},f={score:0,count:30};var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_SCORE":return Object(m.a)({},e,{score:t.score});case"AWAIT":return Object(m.a)({},e);case"ADD_CURRENT_COUNT":return Object(m.a)({},e,{count:t.count});default:return e}},p=Object(u.combineReducers)({fetchReducer:h,ScoreReducer:v}),O=Object(u.createStore)(p,Object(l.composeWithDevTools)(Object(u.applyMiddleware)(d.a)));window.Cypress&&(window.store=O);var g=O,y=n(11),E=(n(49),n(10)),k=n.n(E),j=n(23),C=n(4),S=n(5),T=n(7),w=n(6),N=n(2),x=n(8),I=n(36),Q=n(24),_=function(e){return{type:"GET_QUESTIONS",questions:e}};var R=function(){return function(e){e({type:"REQUEST_TOKEN"}),fetch("https://opentdb.com/api_token.php?command=request").then((function(e){return e.json()})).then((function(e){return e.token})).then((function(t){!function(e){localStorage.setItem("token",JSON.stringify(e))}(t),e(function(e){return{type:"GET_TOKEN",userToken:e}}(t))}))}},A=function(e){var t={player:{name:e.name,gravatarEmail:e.gravatarEmail,score:e.score,assertions:e.assertions}};localStorage.setItem("state",JSON.stringify(t))},B=n(34),D=n.n(B),U=n(9),q=n.n(U);q.a.string,q.a.func;var F=function(e){var t=e.type,n=e.name,a=e.id,c=e.labelText,i=e.placeholder,s=e.testID,o=e.onChange,u=e.value;return r.a.createElement("label",{htmlFor:a},c,r.a.createElement("input",{type:t,name:n,id:a,placeholder:i,"data-testid":s,onChange:o,value:u}))};var G=function(e){var t=e.category,n=e.id,a=e.onClick,c=e.testID,i=e.text,s=e.disabled,o=e.className;return r.a.createElement("button",{type:t?"button":"submit",id:n,className:o,onClick:a,"data-testid":c,disabled:s},i)},L=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(T.a)(this,Object(w.a)(t).call(this,e))).state={disable:!0,gravatarEmail:"",name:"",score:0,assertions:0,redirect:!1},n.handleChange=n.handleChange.bind(Object(N.a)(n)),n.handleClick=n.handleClick.bind(Object(N.a)(n)),n.disableAndAbleButton=n.disableAndAbleButton.bind(Object(N.a)(n)),n.verifyUserLogin=n.verifyUserLogin.bind(Object(N.a)(n)),n}return Object(x.a)(t,e),Object(S.a)(t,[{key:"disableAndAbleButton",value:function(e){return e?this.setState({disable:!0}):this.setState({disable:!1})}},{key:"verifyUserLogin",value:function(){var e=this.state,t=e.name,n=!function(e,t){return function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}(e)&&function(e){return e.length>1}(t)}(e.gravatarEmail,t);this.disableAndAbleButton(n)}},{key:"saveUserLoginOnState",value:function(e,t){this.setState(Object(j.a)({},e,t))}},{key:"handleChange",value:function(e){var t,n,a;return k.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.target,n=t.name,a=t.value,r.next=3,k.a.awrap(this.saveUserLoginOnState(n,a));case 3:this.verifyUserLogin();case 4:case"end":return r.stop()}}),null,this)}},{key:"handleClick",value:function(){(0,this.props.fetchToken)(),A(this.state),this.setState({redirect:!0})}},{key:"render",value:function(){var e=this.state,t=e.username,n=e.gravatarEmail,a=e.disable;return e.redirect?r.a.createElement(y.a,{to:"/trivia-game/game"}):r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:D.a,className:"App-logo",alt:"logo"}),r.a.createElement("form",{className:"login-forms"},r.a.createElement(F,{type:"text",name:"name",id:"player-name",className:"input-login",labelText:"Usu\xe1rio: ",testID:"input-player-name",onChange:this.handleChange,value:t}),r.a.createElement(F,{type:"email",name:"gravatarEmail",id:"player-email",className:"input-login",labelText:"E-mail: ",testID:"input-gravatar-email",onChange:this.handleChange,value:n}),r.a.createElement(G,{id:"login-submit",className:"btn btn-success login-submit",testID:"btn-play",text:r.a.createElement(Q.b,null),disabled:a,onClick:this.handleClick}),r.a.createElement(s.b,{to:"/trivia-game/settings","data-testid":"btn-settings",id:"settings-button"},r.a.createElement(G,{className:"btn btn-secondary settings-button",text:r.a.createElement(I.a,{className:"settings-icon"})}))))}}]),t}(r.a.Component),J=Object(o.b)(null,(function(e){return{fetchToken:function(){return e(R())}}}))(L),M=n(37),P=n.n(M),K=n(38),W=function(e){function t(){return Object(C.a)(this,t),Object(T.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return r.a.createElement(s.b,{to:"/trivia-game"},r.a.createElement(G,{category:"button",id:"go-home","data-testid":"btn-go-home",text:r.a.createElement(K.a,null),className:"btn btn-light"}))}}]),t}(r.a.Component),V=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(T.a)(this,Object(w.a)(t).call(this,e))).Gravatar=n.Gravatar.bind(Object(N.a)(n)),n}return Object(x.a)(t,e),Object(S.a)(t,[{key:"getPlayerDataFromLocalStorage",value:function(){return JSON.parse(localStorage.getItem("state")).player}},{key:"Gravatar",value:function(){var e=this.getPlayerDataFromLocalStorage(),t=e.name,n=e.gravatarEmail,a=P()(n).toString();return{name:t,imgemPerfil:"https://www.gravatar.com/avatar/".concat(a),gravatarEmail:n}}},{key:"render",value:function(){var e=this.Gravatar(),t=e.name,n=e.imgemPerfil,a=this.props,c=a.score,i=a.testID;return r.a.createElement("header",{className:"header"},r.a.createElement("img",{src:n,alt:t,"data-testid":"header-profile-picture"}),r.a.createElement("p",{"data-testid":"header-player-name"},t),r.a.createElement("h3",{"data-testid":i},r.a.createElement("p",{"data-testid":"header-score"},c)),r.a.createElement(W,null))}}]),t}(a.Component),$=(q.a.number,q.a.string,Object(o.b)((function(e){return{score:e.ScoreReducer.score}}))(V)),H=n(39),z=function(e){return{type:"SAVE_SCORE",score:e}},X=function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value},Y=(n(54),{easy:1,medium:2,hard:3}),Z=function(e){function t(){var e;return Object(C.a)(this,t),(e=Object(T.a)(this,Object(w.a)(t).call(this))).state={score:0,assertions:0,disable:!1,correctColor:"btn btn-secondary",wrongColor:"btn btn-secondary",currentCount:30,hide:!1},e.addScoreOnClick=e.addScoreOnClick.bind(Object(N.a)(e)),e.disableButtom=e.disableButtom.bind(Object(N.a)(e)),e.handleClick=e.handleClick.bind(Object(N.a)(e)),e.verifyClock=e.verifyClock.bind(Object(N.a)(e)),e.Timer=e.Timer.bind(Object(N.a)(e)),e.setTimer=e.setTimer.bind(Object(N.a)(e)),e.stopTimer=e.stopTimer.bind(Object(N.a)(e)),e.clearIntervalTimer=e.clearIntervalTimer.bind(Object(N.a)(e)),e.nextQuestionOnClick=e.nextQuestionOnClick.bind(Object(N.a)(e)),e.showNextButton=e.showNextButton.bind(Object(N.a)(e)),e.resetTimeNext=e.resetTimeNext.bind(Object(N.a)(e)),e}return Object(x.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.Timer()}},{key:"setTimer",value:function(e){this.setState((function(e){return{currentCount:e.currentCount-1}}),e)}},{key:"clearIntervalTimer",value:function(){this.state.currentCount<1&&(clearInterval(this.gameTimer),this.disableButtom())}},{key:"nextQuestionOnClick",value:function(){(0,this.props.nextQuestion)(),this.setState({disable:!1,correctColor:"btn btn-secondary",wrongColor:"btn btn-secondary",hide:!1}),this.resetTimeNext()}},{key:"resetTimeNext",value:function(){this.setState({currentCount:30}),this.Timer()}},{key:"stopTimer",value:function(){return clearInterval(this.gameTimer)}},{key:"Timer",value:function(){var e=this;this.gameTimer=setInterval((function(){e.setTimer(e.clearIntervalTimer)}),1e3)}},{key:"disableButtom",value:function(){this.setState({disable:!0,correctColor:"btn btn-success",wrongColor:"btn btn-danger"})}},{key:"verifyClock",value:function(){this.disableButtom()}},{key:"addScoreOnClick",value:function(e,t){var n,a=this,r=this.state.score,c=Y.easy,i=Y.medium,s=Y.hard;switch(Object.keys(Y).find((function(e){return e===t}))){case"easy":n=c;break;case"medium":n=i;break;case"hard":n=s}var o=r+(10+e*n),u=JSON.parse(localStorage.getItem("state")).player;console.log(u),this.setState((function(e){return{score:o,assertions:e.assertions+1}}),(function(){var e=a.state.assertions,t=Object(m.a)({},u,{score:o,assertions:e});A(t)})),(0,this.props.addScoreOnStore)(o)}},{key:"showNextButton",value:function(){this.setState({hide:!0})}},{key:"handleClick",value:function(e,t,n){var a=e.target,r=this.props.difficulty;a.value===t&&this.addScoreOnClick(n,r),this.stopTimer(),this.disableButtom(),this.showNextButton()}},{key:"renderButton",value:function(){var e=this;return r.a.createElement("button",{type:"button","data-testid":"btn-next",className:"btn btn-light next-button",onClick:function(){return e.nextQuestionOnClick()}},"Pr\xf3xima")}},{key:"render",value:function(){var e=this,t=this.props,n=t.answers,a=t.correctAnswer,c=this.state,i=c.correctColor,s=c.wrongColor,o=c.disable,u=c.currentCount,l=c.hide;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"answers-container"},n.map((function(t,c){return r.a.createElement("button",{type:"button",disabled:o,key:t,value:t,"data-testid":a===n[c]?"correct-answer":"wrong-answer-".concat(c),onClick:function(t){return e.handleClick(t,a,u)},className:"\n              ".concat(a===n[c]?i:s," answer-button"),difficulty:t.difficulty},X(t))}))),l?this.renderButton():null,r.a.createElement("p",{className:"current-count"},u))}}]),t}(r.a.Component),ee=Object(o.b)((function(e){return{count:e.ScoreReducer.count}}),(function(e){return{addScoreOnStore:function(t){return e(z(t))}}}))(Z),te=(q.a.array,q.a.string,q.a.number,function(e){function t(){var e;return Object(C.a)(this,t),(e=Object(T.a)(this,Object(w.a)(t).call(this))).state={id:0},e.nextQuestion=e.nextQuestion.bind(Object(N.a)(e)),e.renderQuestions=e.renderQuestions.bind(Object(N.a)(e)),e}return Object(x.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.getQuestions)(e.token)}},{key:"nextQuestion",value:function(){this.setState((function(e){return{id:e.id+1}}))}},{key:"renderQuestions",value:function(e){var t=[e.correct_answer].concat(Object(H.a)(e.incorrect_answers));return t.sort(),r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{"data-testid":"question-category",className:"question-category"},e.category),r.a.createElement("p",{"data-testid":"question-text",className:"question-text"},X(e.question)),r.a.createElement(ee,{nextQuestion:this.nextQuestion,answers:t,correctAnswer:e.correct_answer,difficulty:e.difficulty}))}},{key:"render",value:function(){var e=this,t=this.props.questions,n=this.state.id;return 0===t.length?r.a.createElement("p",null,"Loading..."):5===n?r.a.createElement(y.a,{to:"/trivia-game/feedback"}):t.map((function(t){return e.renderQuestions(t)}))[n]}}]),t}(r.a.Component)),ne=Object(o.b)((function(e){return{questions:e.fetchReducer.questions,token:e.fetchReducer.userToken}}),(function(e){return{getQuestions:function(t){return e((n=t,function(e){var t,a;return k.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,k.a.awrap(fetch("https://opentdb.com/api.php?amount=5&token=".concat(n)));case 3:return t=r.sent,r.next=6,k.a.awrap(t.json());case 6:return a=r.sent,r.abrupt("return",e(_(a.results)));case 10:return r.prev=10,r.t0=r.catch(0),r.abrupt("return",e({type:"GET_QUESTIONS_ERROR",error:r.t0}));case 13:case"end":return r.stop()}}),null,null,[[0,10]])}));var n}}}))(te),ae=(n(55),function(e){function t(){var e;return Object(C.a)(this,t),(e=Object(T.a)(this,Object(w.a)(t).call(this))).state={redirect:!1},e}return Object(x.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return this.state.redirect?r.a.createElement(y.a,{to:"/trivia-game/feedback"}):r.a.createElement("div",{className:"game-page"},r.a.createElement($,{testID:"header-score"}),r.a.createElement("main",{className:"game-container"},r.a.createElement(ne,null)))}}]),t}(r.a.Component)),re=Object(o.b)((function(e){return{questions:e.fetchReducer.questions,done:e.fetchReducer.done}}))(ae),ce=function(e){function t(){return Object(C.a)(this,t),Object(T.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",{"data-testid":"settings-title"},"Configura\xe7\xf5es"))}}]),t}(r.a.Component),ie={score:2,answer:"Podia ser melhor..."},se={score:3,answer:"Mandou bem!"};var oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<=ie.score?r.a.createElement("p",{"data-testid":"feedback-text"},ie.answer):r.a.createElement("p",{"data-testid":"feedback-text"},se.answer)},ue=function(e){function t(){var e;return Object(C.a)(this,t),(e=Object(T.a)(this,Object(w.a)(t).call(this))).assertionsFeedback=e.assertionsFeedback.bind(Object(N.a)(e)),e}return Object(x.a)(t,e),Object(S.a)(t,[{key:"assertionsFeedback",value:function(e){return r.a.createElement("p",{"data-testid":"feedback-total-question"},e)}},{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("state")).player.assertions;return r.a.createElement("div",null,oe(e),this.assertionsFeedback(e))}}]),t}(r.a.Component),le=function(e){function t(){var e;return Object(C.a)(this,t),(e=Object(T.a)(this,Object(w.a)(t).call(this))).state={redirect:!1},e.handleClick=e.handleClick.bind(Object(N.a)(e)),e}return Object(x.a)(t,e),Object(S.a)(t,[{key:"handleClick",value:function(){var e,t;return k.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=localStorage.getItem("token"),n.next=3,k.a.awrap(fetch("https://opentdb.com/api_token.php?command=reset&token=".concat(e)));case 3:return t=n.sent,this.setState({redirect:!0}),n.abrupt("return",t);case 6:case"end":return n.stop()}}),null,this)}},{key:"render",value:function(){return this.state.redirect?r.a.createElement(y.a,{to:"/trivia-game"}):r.a.createElement(G,{category:"button",id:"reset-button",className:"btn btn-light reset-button",testID:"btn-play-again",text:r.a.createElement(Q.a,null),onClick:this.handleClick})}}]),t}(r.a.Component);function de(){var e=localStorage.getItem("score");return JSON.parse(e)}var me=function(e){function t(){return Object(C.a)(this,t),Object(T.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){de()}},{key:"render",value:function(){var e=de();return r.a.createElement("div",null,r.a.createElement($,{score:e,testID:"feedback-total-score"}),r.a.createElement(ue,{score:e}),r.a.createElement(W,null),r.a.createElement(le,null))}}]),t}(a.Component);n(56),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(o.a,{store:g},r.a.createElement(s.a,null,r.a.createElement((function(){return r.a.createElement("div",{className:"App"},r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/trivia-game",component:J}),r.a.createElement(y.b,{path:"/trivia-game/settings",component:ce}),r.a.createElement(y.b,{exact:!0,path:"/trivia-game/feedback",component:me}),r.a.createElement(y.b,{exact:!0,path:"/trivia-game/game",component:re})))}),null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[40,1,2]]]);
//# sourceMappingURL=main.6b738189.chunk.js.map